import Head from "next/head";
import { useEffect, useState } from "react";
import ResultList from "../components/resultlist";
import { Drink, DrinkType } from "../types";

export default function Home() {
  const [beers, setBeers] = useState<Drink[]>([]);
  const [drinkType, setDrinkType] = useState<DrinkType>("beer");

  const getDrinks = (type: DrinkType) => {
    console.log("Fetching beers");

    fetch(`/api/drinks/${type}`)
      .then((response) => response.json())
      .then((data) => {
        setBeers(JSON.parse(data));
      });
  };

  useEffect(() => {
    getDrinks(drinkType);
  }, [drinkType]);

  return (
    <>
      <Head>
        <title>Alculator</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <h1>Alculator</h1>
        <select
          name="drinks"
          id="drinks"
          onChange={(e) => setDrinkType(e.target.value)}
        >
          <option key="beer">Beer</option>
          <option key="cider">Cider</option>
        </select>
        {/* <button onClick={() => setDrinkType("beer")}>Get beers</button> */}
        {/* <button onClick={() => setDrinkType("cider")}>Get ciders</button> */}
        <ResultList listItems={beers} />
      </main>
    </>
  );
}
